TODO-lista meggien kehittäjille. Pitäisi olla suht. ajantasalla. Muista katsoa myös
Hoksotin-projektin vaatimusmäärittely.

*** Asennus ym ***

		Testaa Canopy ja päivitä asennusohjeita

		mne_browse_raw:lle oikeat säädöt ohjeisiin

*** Batch-toiminnallisuus ***

		Lista oisi jees, tyyliin yhden koehenkilön tiettyyn vaiheeseen asti
		lista, ja sitten batch-ajoa ennen voisi valita kohdetiedostot,
		joille ajaa, ja muokata sen listan komentoja ja parametrejä
		-Kätevä sikäli, että voisi sitten myöhemmin ajaa myös ehkä ilman
		 graafista käyttöliittymää
		-Ei välttämättä vaadi useampaa subjectia (nyk. experimenttiä)
		 näkyviin käyttöliittymään, vaan voisi vain kehitellä erillisen
		 käyttöliittymän, jolla nykyisestä experimentistä otetaan
		 toimenpiteet ja parametrit ylös, ja käytetään niitä sitten
		 haluttuun raw-tiedostoon.
			-Mahdollisuus editoida näitä toimenpiteitä ja parametrejä
			 ennen käyttöä
		-Toteutus yksinkertaisimmillaan niin, että experiment tietää, mitä
		 toimintoja on tehty, ja arvot otetaan dialogien arvoja varten
		 tehdyistä param-tiedostoista.


*** Epookit ***

		Epoching pitäisi voida tehdä ilman valmiita triggereitä datassa,
		jakamalla vain koko mittausdata (tai osat siitä) pätkiin käyttäjän
		halun mukaan, pätkät voi mennä päällekkäinkin (kts.
		ikkunointifunktiot, esim. Hanning)
		-Ja tästä sitten spektrin laskenta periaatteessa samoin kuin nykyään

		Epookkien luominen tarkempien ehtojen perusteella (bit mask)

OSITTAIN TEHTY	parametrilista epocheille
		Ongelma: Importatuilla epookeilla ei ole parametritietoja saatavana.

OSITTAIN TEHTY	Epookkeja pitää pystyä muokkaamaan jälkikäteen. Pitäsikö alkuperäiset
		epookit säilyttää?

TEHTY		Epookit tallentuvat. Lisäksi import/export sekä poistaminen toimivat.

TEHTY		keskiarvoistuksen yhteydessä valinta mitä eventtejä kyseisestä epoch
		collectionista otetaan huomioon

*** EventSelectionDialogMain ***

		Epookkien valinnassa include- ja excludesyöttö esim. ihan puhtaina
		tekstikenttinä.

		EpochCollectionin nimeäminen kuntoon (tyhmien nimien esto puuttuu
		vielä),	sama eventeille. molemmista erikoismerkit pois.

?		Eventtien xls-tiedostotalletus ja luku --> muuta toimimaan csv:llä

TEHTY		Defaulttina mag ja grad epoch parametreissa valittuna

TEHTY		rejection parametreihin olisi hyvä laittaa esim. -1 jotta sitä ei
		otettaisi huomioon

*** EvokedStatsDialog ***

OSITTAIN TEHTY -Multiselection evokedstatsiin. Vaatii hitosti vielä säätöä.
		Varsinkin, kun poistaa valintoja. Set as selectedin tekstiä voisi
		muuttaa, jos on tallentamattomia muutoksia tjsp.

		Evoked-listalle pitäisi saada jokainen evoked omaksi itemikseen. Ei
		niin, että itemissä on lista evokedeja. Helpottaa jatkokäsittelyä.

		Dialogin Ui-toiminnot toteutettu pääosin. Ulkoasu vaatinee
		muokkausta.

		Dialogiin statistiikkojen, CSV:n ja visualisointien toteutukset.

*** Filteröinti ***

		Periaatteessa yleensä fiksua tehdä vasta keskiarvoistuksen jälkeen
		ja katsoa sitten keskiarvoistettua tietoa eri filtereiden läpi.
		-Ongelma: vaikea tehdä high-pass pienelle pätkälle dataa ilman että
		 tulee häiriöitä.
			+ MNE-Python tyypeillä tämä ehkä työn alla (Gramfort)

		filteröinti (low,high,band) laitetaan osaksi available
		actioneja (huom. ei visualisointipalikka)

		filteröinnissä mahdollisuus tehdä samaan aikaan low, high ja bandpass

		filteröinti-ikkunassa preview näyttäisi taajuusasteet

*** FileManager ***

		Tiedostot kannattaisi ehkä avata vasta sitten, kun niitä tarvitaan.

		Tiedostojen ja kuvaajien talletus julkaisujen kannalta fiksuihin
		muotoihin.

		ecg_calculate kahteen kertaan ---> hassuja tiedostonimiä

?		Joissakin visualisoinneissa saatavat aikasarjat CSV-muotoon.
		(CSV-metodeja löytyy FileManagerista).

?		Pickle-kirjaston käyttäminen kuvaajaolioiden yms. talletukseen
		levylle ---> voi helpommin muokata kuvaajia julkaisukuntoon?
		- Tarvitseeko, vai riittääkö että avaa experimentin ja visualisoi
		  siitä haluamakseen?
		- Tai että voi manuaalisesti asettaa visualisoidessa otsikon ja
		  akselit?

OSITTAIN TEHTY	kanavakeskiarvoista ulos tunnuslukutaulukko, fif ja raaka csv

TEHTY		Keskiarvo tietojen talletus takaisin Fiff-tiedostoihin.

*** MaxFilter ***

		Kalibraatiofiludialogi voisi tarvittaessa sanoa, että "MaxFilter not
		installed, no calib. files to show" tjsp.

		Maxfilterin testaus ja parametrinkirjoitus

HUOM		MaxFilterin asennus tekee oletuksena hakemiston /neuro/databases,
		mutta ei sen alle hakemistoja /sss ja /ctc.

HUOM		sss-hakemistossa on labrakohtaisia kalibraatiotiedostoja, mutta mitä
		ovat ctc-hakemistossa olevat tiedostot?  Liittyykö yksi
		ctc-hakemiston tiedosto useampaan sss-hakemiston tiedostoon?

*** Statistics ***

		Keskiarvoistuksessa otetaan vektorisummat: kunkin sensorin
		vektorisummat (gradiometreistä) ja niiden laskeminen.

		Keskiarvoistus myös useammista koehenkilöistä.

		Kanavakeskiarvot

		mahdollista valita epochien parametrilistasta mitkä eventit
		piirretään päällekkäin/keskiarvoistetaan.

TEHTY		Maksimit ja puolimaksimit sekä niiden ajankohdat saadaan
		laskettua taulukkomuotoisesta datasta. lisäksi integraali
		puolimaksimeista saadaan laskettua

TEHTY		Mitä jos puolimaksimia ei löydy, ennen näytteen päättymistä (epookit
		ja evokedit)

*** TFR ***

		TFR:ssä voidaan valita eventit joille tehdään (ikkunassa näytetään
		joku tunniste, esim. eventtinimellä right ear, left ear)

?		jotain TFR-juttuja oli: epoch/channel tfr:ään, plot talteen;
		aikasarjoihin aika ja arvo sillä hetkellä

*** Visualisointi ***

		TFR-laskemisessa pitäisi esim. voida valita tavallinen fft
		(***minkä sijaan?***)

		Spektrin laskeminen:
		-Taajuusvälin säätäminen nykyisessä toteutuksessa olis poikaa, niin
		 tulee selkeämpää
		-Taajuusakselin resoluutio parametriksi (1024 hyvä default)
		-Kts. myös spectral densityn laskeminen  .

		Visualisointi-ikkunoihin olisi hyvä voida määrittää omia otsikoita
		ym. ulkonäköön liittyviä asioita.

		Yhtä aikaa useamman kanavan spektri näkyviin, esim. suoraan napin
		takaa valittavasta listasta ne kanavat. (EvokedStatsDialogissa on
		lähdetty hakemaan tämänsuuntaista toimivuutta.)

		Useampi keskiarvoistuskäppyrä päällekkäin, ks EvokedStatsDialog.

		Käyrät vektorikuviksi.

		TFR:ssä akselit mieluiten objekteina, joita voi myöhemmin muokata.

		mne power spectral densityn toteuttaminen, niin että piirretään
		samaan ikkunaan esim. ennen ja jälkeen filtteröintiä muodostuneet
		kuvaajat:
		-käyttäjä saa ruksia mitkä käyrät piirretään
		-ks. http://www.martinos.org/mne/auto_examples/time_frequency/
		 plot_compute_raw_data_spectrum.html#example-time-frequency-plot-
		 compute-raw-data-spectrum-py

?		käyttäjälle valittavaksi tehdäänkö visualisointia aika- vai
		taajuustasossa (Liittyy mihin?)

?		TFR-topologiadialogin oudot exception-message-ikkunat (laita esim.
		cyclejä liikaa)
		- Ei toimi samoin kuin normi TFR-dialogissa
		- Liittyy matplotlibiin? Tai Joblibiin? (Kts. se virhe)

TEHTY		MNE esimerkeistä 'visualize channel over epochs as image'
		toteuttaminen (tehdään keskiarvoistetuille epocheille).

TEHTY		avg epochien visualisoinnissa valinnaksi mitä eventtejä
		visualisoidaan päällekkäin kyseisestä avg collectionista
		(pystyy tekemään meggiellä)

*** UI ***

		Tällä hetkellä ei tunnista, jos alun perin avatulle filulle on jo
		tehty MaxFilter 

		Varmista, että toimintoja ei tehdä kahdesti (Tällöin lisätään monessa
		metodissa oleva checked is None -säätö)

		Number of jobs -defaultti voisi olla ydinten määrä -1
		(Liittyy mihin?)

		Painikkeet harmaaksi, jos niillä ei pysty vielä tekemään mitään.

		ECG/EOGComputeDialogeissa Cancel/Compute-dialogeissa manuaalisesti
		laitettu nappien järjestys ---> työpöytäsysteemistä riippuen väärin
		päin. (Hoituu QButtonBoxilla)

		Mahdollisuus keskeyttää pitkät toimenpiteet?

		Harmaannutettuja esimerkkisyötteitä tekstikenttiin (“Eg. MEG0121”)

		Koetta avattaessa voisi sovellus oletuksena tarjota hakemistoa,
		joka on edellisellä kerralla ollut avattuna.

		Jos ecg-dialogissa käyttäjä antaa väärän kanavan, virheilmoitus ei
		ole fiksu.

		datan visualisointipalikat voisi luokitella omaan osioon välilehdillä

		visualize signal trial epoching välilehdelle alas

		experimentiin save info/update info -painike

?		Kuuluisiko TFR-dialogissa olla myös baseline rescaling, kuten
		TRF-topology -dialogissa?

?		pick_types-komento, jota tarvitaan vain parissa kohtaa.
		(Tarkoittaa mitä?

?		Jos käyttäjä unohtanut asettaa (mitatessa?) jonkin kanavan
		EOG-alkuiseksi nimeltään ---> pitää voida valita käytettävä kanava.
		(Liittyy mihin?)
		-Tällä hetkellä ei tosiaan toimi tuo valinta MNE:n komennoissa --->
		 Kyselyä MNE:n Alexanderille.

?		MainWindowin initialize_ui ajetaan joka kerta, kun jossakin
		dialogissa klikataan UI:ta --> esim. tabien piirto on siinä, ehkä
		tarpeettomasti.

?		Ikonit (koko sovellus + menut ja toolbar-valinnat)

?		ECG/EOG-parametridialogeissa mne ei välitä bad channeleista -->
		mne:n vika?
		- Liity MNE-listalle ja kysy asiasta

?		ECG/EOG-projektioiden laskeminen muuttaa raakaoliota - pitäisikö?

?		"No rights to chosen path"-virheilmoitus create experiment
		dialogissa, jos ei onnistu ekalla yrittämällä esim. täyden levyn
		takia ja sitten yrittää uusiksi

?		Ecg-eog -projektiodialogin filterin cut-off - muuttaa dataa, ei ole
		selvää käyttäjälle

OSITTAIN TEHTY	epoching ja preprocessing tabilla eroteltu kokonaisuuksia

OSITTAIN TEHTY	Preprocessing-kohtaan MaxFilteristä erillinen filteröinti.

OSITTAIN TEHTY	Tarkista, että kaikissa dialogeissa on joku kohta, joka nappaa
		poikkeukset esim. mne:ltä ja näyttää ne käyttäjälle.
		- TFR-topologiadialogissa ehkä vaikeampi, kts. matPlotlib
		- Tarkista myös, että kaikki virheilmoitukset tulevat oikeasti
		  näkyviin, eivätkä esim. jää muiden dialogien taakse.

OSITTAIN TEHTY	Dialogeissa on kohtia, jotka vievät liikaa tilaa
		- Ja liian myöhään ilmaantuvia scrollbareja yms.

TEHTY		preprocessing välilehdellä pitäisi olla mne_browse_raw painike

TEHTY		raw-tabin triggerit samalla tavalla esitettynä kuin muukin
		raw data/experiment info, eli textlabeleina.

TEHTY		raw-tabin nimeksi esim. info.

TEHTY		experiment info ja file info erikseen raw-tabille tai jopa oma tabi
		molemmille.

TEHTY		Steppien suoritus selkeämmiksi preprocessing tabissa

TEHTY    	working filen päivittyminen mainwindowin alareunaan, jos ei suorita
		mitään prosessia.

TEHTY		Virhetilanne painettaessa painiketta "Ok", kun käsiteltävää
		raakadatatiedostoa ei ole valittu, mutta pakollinen tekstikenttä
		"experiment name" on täytetty.

TEHTY		Useassa kohtaa fiksua valita, mitä kanavaryhmiä tarvitaan.

TEHTY		About-menukohta erilliseen menuun.

TEHTY		Ikkunan otsikossa voisi näkyä experimentin nimi.

TEHTY		Close-nappi "Confirm"-lisäyksellä.

TEHTY		listanimeämiset yksilökohtaiseksi, esim (2) loppuun kun tulee dupli.
		Helpottaa jatkokäsittelyä.

TEHTY		Konsolitekstit käyttikseen omaan ikkunaansa, voisi olla joku
		show/hide -nappula jossain.

*** Yleistä ***

HUOM		Luokat yleisesti periytymään QObjecteista, ei Objecteista, niin
		new style -signaalit luokkien välillä toimii. (Helpottaa tekemistä)

		Experimentin luonnin pitäisi varmaan tehdä vain experiment-kansio,
		subjectien lisäys sitten myöhemmin erillisellä ikkunalla.
		-Nykyinen CreateExperiment-dialogi olisi käytännössä tuo add subject
		 Ja esim. ylimääräinen QComboBox, josta valita kulloinkin
		 näkyvä.
		-Erillinen batch-alue käyttöliittymään?

		Ticket-systeemi bugeille ja git siten, että muillakin
		commit-oikeuksia

		Loki tehdyistä toiminnoista per subject

		QTDesignerFiles kansion siivous, ylimääräiset joko roskiin tai old
		templatesiin.

		Olioiden, muuttujien ja UI-elementtien nimet kuntoon. Ui-elementeissä
		esim pushButtonAverage.

		Experiment-class uusiksi.

		Käyttäjälle palautetta eri toiminnoista, varsinkin jos niissä kestää
		paria sekuntia kauemmin.

		Caller-luokka on turha, sen toiminnot omiin luokkiinsa.

		ecg/eog-projektioiden laskemisen pystyi tekemään jo projisoidulle
		datalle, tämän toiminnallisuutta syytä miettiä.

		jos prosessien aikana tallennettuja tiedostoja poistetaan
		manuaalisesti työkansiosta, niiden tiedot jää edelleen ohjelmaan
		muistiin, mikä sekoittaa prosessien uudelleen suorittamista.

?		addECGparameters ei pääse kirjoittamaan (levy täynnä) ---> tee tilaa
		levylle ---> yritä samaa nappia, seurauksena
		self.proj_file=glob.glob(directory + '*_ecg_proj.fif')[0]
		IndexError: list index out of range

?		Varmista toimivuus erityyppisillä datoilla.

TYÖN ALLA	Älä piirrä matplotlibin ikkunoita uudestaan koko ajan niitä
		liikutellessa tai kokoa muuttaessa.

OSITTAIN TEHTY	Ei kutsuta parentteja vaan käytetään signaaleja ja slotteja.

*** Bugeja ja korjattavaa ***

		Useamman kerran samalla dialogilla magnitude spectrum piirtäessä
		piirtää samaan ikkunaan

		PääUI ei piirry pitkien toimenpiteiden aikana

		ECG/EOG ensin exclude SSP projectors kohdassa defaulttina ruksi,
		computen jälkeen ruksi siirtyy kohtaan compute ssp after averaging

		ECG/EOG QRS detection tresholdia muutettaessa pienemmäksi (ainakin)
		voi tulla nonetype error

		power spectral density magnitude spectrumin tilalle

		raakadata luetaan kahteen kertaan experimentiä ladattaessa

		"No rights to chosen path"-virheilmoitus create experiment
		dialogissa, jos ei onnistu ekalla yrittämällä esim. täyden levyn
		takia ja sitten yrittää uusiksi
		-jos ei ole tilaa levyllä tekee silti experiment kansion <- tämän
		 voisi poistaa

		Visualize evoked -napissa kestää aivan töykeän kauan, mutta
		käyttäjälle ei kerrota mitään

?		Workspacen säätämisen jälkeen voitaisiin mennä suoraan
		createprojectdialogiin. Ja workspacen vaihto johonkin experiment
		config -dialogiin?

OSITTAIN TEHTY	Tooltipit	

TEHTY		rejection parametrien checkboxien kanssa ongelmia epoch creation
		dialogissa

TEHTY		Ilmoitukset, jos jokin backend-kalikka puuttuu nappia painaessa.

TEHTY		Create ja open experiment - avaako raw filen tuplana? 

TEHTY		Eventselectionin initissä ongelma. Modifyssä removenappi on harmaana.

TEHTY		Averagea klikatessa ei tee mitään (ei edes näytä virheilmoitusta),
		jos epookkikokoelmaan ei ole valittu mag- tai grad-kanavia.

TEHTY		Experimentin kuvauskenttään skandien laittaminen kaataa koko ohjelman
